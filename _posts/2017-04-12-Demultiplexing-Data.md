---
layout: post
title: Demultiplexing Data
---

## Demultiplexing is perplexing

It's time to modify our [DIA Analysis](https://github.com/sr320/LabDocs/wiki/DIA-data-Analyses) pipeline and get more usable data from it. The first step would be to reconvert all of my .raw files to .mzmL files, this time demultiplexing the data.

When we set up m/z ratios for the mass spectrometer to use, the machine misses certain windows. To fix this, we add overlapping windows to our method. Demulitplexing allows us to separate overlapping windows.

Sean tried demultiplexing using the code on the DIA wiki, but ran into an error that referenced the isolation windows.

```
msconvert.exe --zlib --64 --mzML --filter "peakPicking true 1-2" --filter "demultiplex optimization=overlap_only" *.raw
```

I tried my hand at demultiplexing in this [Jupyter notebook](https://github.com/RobertsLab/project-oyster-oa/blob/master/notebooks/2017-04-12-Demultiplex-Raw-Files.ipynb).

I used a [.config file]() instead of directly inputting code because that's what the [Evernote](https://www.evernote.com/shard/s347/sh/edcb06ab-d008-418f-b28f-52f6614f1c39/2984ab55f427fcfe) suggested I do the [last time I used MSConvert's CLI](https://github.com/RobertsLab/project-oyster-oa/blob/master/notebooks/2017-03-07-Reconvert-mzML-Files.ipynb).

The code I used, referencing my .config file:

```
"c:\Program Files\ProteoWizards\ProteoWizard 3.0.10577\msconvert.exe" -c C:\Users\srlab\Documents\oystertest\msconvert-SIMMS1.config C:\Users\srlab\Documents\oystertest\2017_January_23_envtstress_oyster1.raw
```

I got a different error from Sean. `msconvert` was reading my demultiplexing filter argument, but then ignoring it.

![msconvert-error](https://camo.githubusercontent.com/917ac49d654021d533fcee70ae12a4220e17c0de/68747470733a2f2f636c6f75642e67697468756275736572636f6e74656e742e636f6d2f6173736574732f32323333353833382f32343937303332312f63313962643135362d316636382d313165372d383737332d3937373966663964616636352e706e67)

I tried several iterations of this, still getting errors, before I asked Emma what her lab suggested. The Github issue can be found [here](https://github.com/sr320/LabDocs/issues/561#issuecomment-293659089). Emma spoke with Austin, who is responsible for `msconvert`. Turns out, our isolation windows generated by Skyline have some quirks that prevent the program from recognizing them. Austin rewrote `msconvert` so it can read our files. I sent my files over to Emma to demultiplex since the new version is installed on the Genome Sciences server, so now I'm just waiting on the result!
